// Globally import lodash
module.exports = global._ = require.requireActual("lodash");

var mockTerrain = {
  shapes:
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "......#####.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "......#...#.......................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "....................#####.........................\n" +
    "....................#####.........................\n" +
    "....................#####.........................\n" +
    "....................#####.........................\n" +
    "....................#####.........................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "....#.......#.....................................\n" +
    "....#.......#.....................................\n" +
    "....##......#.....................................\n" +
    ".....#.....##.....................................\n" +
    ".....###..##......................................\n" +
    ".......###........................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n" +
    "..................................................\n",

  W15S28:
    "##################################################\n" +
    "##################################################\n" +
    "##################################################\n" +
    "##################################################\n" +
    "##############......##############################\n" +
    "############..........############################\n" +
    "###########.............##########################\n" +
    "##########.....##..................###############\n" +
    "######.###....####...................#############\n" +
    "####....##...#####...#####..........~.############\n" +
    "##.........#######..#######.........~~~###########\n" +
    "#........#########..#######.........~~~###########\n" +
    ".......###########..######...........~~~##########\n" +
    "......############..#####........##.....##########\n" +
    "...~.#############...###........####....##########\n" +
    "...~##############.............######...##########\n" +
    "...###############..........~.########..##########\n" +
    "..################............########..##########\n" +
    "..################............########...#########\n" +
    "..################............########....########\n" +
    "..################....##......########.....#######\n" +
    "..################....##......########.....#######\n" +
    "..################............########......######\n" +
    "..################............#######.......######\n" +
    "..################................~~~........#####\n" +
    "..###############.................~..........#####\n" +
    "...#############....................###.......####\n" +
    "...############...........##.......####.......####\n" +
    "....##########...###.....###........##.........###\n" +
    ".....########...####......##...................###\n" +
    "......######...#####............................##\n" +
    ".......####....####...........###...###.........##\n" +
    "........##......##............####.#####.......###\n" +
    ".......................###.....##...####.......###\n" +
    "......................#####..........##........###\n" +
    "....###...............#####....................###\n" +
    "....###...............#####....................###\n" +
    ".....##...............####.....................###\n" +
    ".............##...##...............###...##....###\n" +
    ".............########.............####...###.~~###\n" +
    "..............########...........#####...####~~###\n" +
    "..............#########.........######...####~~###\n" +
    "............############........######....##...###\n" +
    "##########################....########.........###\n" +
    "######################################.........###\n" +
    "######################################.........###\n" +
    "######################################.........###\n" +
    "#####################################..........###\n" +
    "####################################...........###\n" +
    "####################################...........###\n",

  W16S28:
    "###############..........................#########\n" +
    "##############................................####\n" +
    "..##...##..##....................##............###\n" +
    "................................#####...........##\n" +
    ".....................####.......######..........##\n" +
    "....................######......#######........###\n" +
    ".................#########.....########........###\n" +
    ".............#############....########.........###\n" +
    ".....~~~.....#############...######............###\n" +
    ".....~~~....~##############..#####..............##\n" +
    ".............~~~~##########...###................#\n" +
    "...............~..########.......................#\n" +
    "...................######.............###.........\n" +
    "#......##.............##.............#####........\n" +
    "#.....#####.........................#######.......\n" +
    "#.....######.......................########.......\n" +
    "#......######.....................#########.......\n" +
    "#.......#######..............~~...##########......\n" +
    "##......########..................###########.....\n" +
    "###......#######....###............####...####....\n" +
    "####.........##.....####.....##....###.....###....\n" +
    "####.................###....####..####.....###....\n" +
    "###...................#.....#########.....####....\n" +
    "###..........................#######.....######...\n" +
    "###...........................######....#######...\n" +
    "####............................###.....########..\n" +
    "#####....................................#######..\n" +
    "#####.........####........................#####...\n" +
    "####.........#######........................##....\n" +
    "####.........########.............###.............\n" +
    "####.........########......##....#####............\n" +
    "###...........#######.....####..#########.........\n" +
    "###.............#####.....################........\n" +
    "##................###.....#################.......\n" +
    "##.................###.....########..#######......\n" +
    "##.....~............##........###.....######......\n" +
    "##....~~~...........###...............######......\n" +
    "##.....~............###...............#######.....\n" +
    "##..................###................######.....\n" +
    "##..................###.................######....\n" +
    "###.................####........##.......####.....\n" +
    "####.........####..######......####...............\n" +
    "####........#############.....#####...............\n" +
    "####........######..#####.....######.............#\n" +
    "###........######....###.....#######............##\n" +
    "####..##########~.........#########.............##\n" +
    "###############~~........#########.......###.....#\n" +
    "##############.~........##########...########....#\n" +
    "#########...........##############..##########..##\n" +
    "#########..........###############################\n",
};

var map = {
  getTerrainAt: (x, y, roomName) => {
    if (x instanceof RoomPosition) {
      roomName = x.roomName;
      y = x.y;
      x = x.x;
    }
    if (roomName in mockTerrain) {
      let c = mockTerrain[roomName][y * 51 + x];
      return c == "#" ? "wall" : c == "~" ? "swamp" : "plain";
    } else {
      return "plain";
    }
  },
};

global.Game = {
  map,
};

global.RoomPosition = class RoomPosition {
  constructor(x, y, roomName) {
    this.x = x;
    this.y = y;
    this.roomName = roomName;
  }

  toString() {
    return `[room ${this.roomName} pos ${this.x},${this.y}]`;
  }
};

global.Room = class Room {};

global.RoomObject = class RoomObject {};

global.Flag = class Flag extends RoomObject {};

global.Source = class Source extends RoomObject {};

global.Structure = class Structure extends RoomObject {};

global.StructureSpawn = global.Spawn = class StructureSpawn extends Structure {};

global.Creep = class Creep extends RoomObject {};

global.STRUCTURE_SPAWN = "spawn";
global.STRUCTURE_EXTENSION = "extension";
global.STRUCTURE_ROAD = "road";
global.STRUCTURE_WALL = "constructedWall";
global.STRUCTURE_RAMPART = "rampart";
global.STRUCTURE_KEEPER_LAIR = "keeperLair";
global.STRUCTURE_PORTAL = "portal";
global.STRUCTURE_CONTROLLER = "controller";
global.STRUCTURE_LINK = "link";
global.STRUCTURE_STORAGE = "storage";
global.STRUCTURE_TOWER = "tower";
global.STRUCTURE_OBSERVER = "observer";
global.STRUCTURE_POWER_BANK = "powerBank";
global.STRUCTURE_POWER_SPAWN = "powerSpawn";
global.STRUCTURE_EXTRACTOR = "extractor";
global.STRUCTURE_LAB = "lab";
global.STRUCTURE_TERMINAL = "terminal";
global.STRUCTURE_CONTAINER = "container";
global.STRUCTURE_NUKER = "nuker";
